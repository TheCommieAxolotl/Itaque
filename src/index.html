<!DOCTYPE html>
<html id="html" class="default" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="StartPage">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>New Terminal Tab</title>
    <link href="https://thecommieaxolotl.github.io/StartPage/src/styles.css" rel="stylesheet">
    
    <script>
        
        function setup() {
            const body = document.getElementById('html');
            document.getElementById("searchbar").focus()
  
            const Header = document.getElementById("Head")
            const d = new Date();
            const [date, time] = d.toLocaleString().split(" ");
            Header.innerHTML=`It's ${time.slice(0, time.length - 3)} on ${date.replace(",", "")}`;
            
            
            const theme = localStorage.getItem('theme');

            if (theme) {
                 body.classList.add(theme);
            }
            
        }
        
         function focusInput() {
            document.getElementById("searchbar").focus()
        }
        
    </script>
</head>

<body id="body" onload="setup()" onclick="focusInput()">
  <p class="Head" id="Head" >user@home <span id="Tilda">&gt;</span> newtab</p>
    <p class="Subview">▲ <span id="Tilda">~ </span> cd tabs/firefox </p>
    <p class="Subview">▲ <span id="Tilda">~ </span> ls </p>
        <a class="Link1" href="https://reddit.com">reddit</a>
        <a class="Link1" href="https://github.com">github</a>
        <a class="Link1" href="https://stackoverflow.com">stack</a>
    <div></div>
    <form id="form">
    <a class="Subview" >▲ <span id="Tilda">~ </span> </a>
       <input maxlength="56" class="Input" autocomplete="off" id="searchbar" ></input>
       <button class="SearchButton" type="enter" action="search()">e</button>
    </form>
    <p class="NotFound" id="aboutText" ></p>
    <p class="Subview" id="help1" ></p>
    <p class="Subview" id="help2" ></p>
    <p class="Subview" id="help3" ></p>
    <script>
      const h = document.getElementsByClassName('Head');
      const s = document.getElementsByClassName('Subview');
      const t = document.getElementById('aboutText');
      const f = document.getElementById('form');
      const q = document.getElementById('searchbar');
      const help1 = document.getElementById('help1');
      const help2 = document.getElementById('help2');
      const help3 = document.getElementById('help3');
        
      const gg = 'https://www.google.com.au/search?q=';
      const ddg = 'https://www.duckduckgo.com/?q=';
      const www = 'https://www.';
      const input = q.value.toLocaleString();
      const body = document.getElementById('html');

      function submitted(event) {
          
         if (q.value.includes("about")) {
             event.preventDefault();
              t.innerHTML='made by TheCommieAxolotl';
              help1.innerHTML='';
              help2.innerHTML='';
              help3.innerHTML='';
         }
          
          if (q.value.includes("open") == true) {
              const url = www + q.value.replace("open ", "");
              const win = window.open(url, '_blank');
              window.close('https://thecommieaxolotl.github.io/StartPage/src/index.html');
              win.focus();
          }
          
          if (q.value.includes("!g")) {        
              const url = gg + q.value.replace("!g", "");
              const win = window.open(url, '_blank');
              window.close('https://thecommieaxolotl.github.io/StartPage/src/index.html');
              win.focus();
          }
          
          if (q.value.includes("search")) {        
              const url = ddg + q.value.replace("search", "");
              const win = window.open(url, '_blank');
              window.close('https://thecommieaxolotl.github.io/StartPage/src/index.html');
              win.focus();
          }
          
          if (q.value.includes("about", "open", "search", "theme", "reset", "help") == false) {
              event.preventDefault();
              t.innerHTML='command not found';
              q.select();
              help1.innerHTML='';
              help2.innerHTML='';
              help3.innerHTML='';
          }
          
          if (q.value.includes("theme")) {
                event.preventDefault();
                t.innerHTML='theme not found';
                help1.innerHTML='';
                help2.innerHTML='';
                help3.innerHTML='';
              
           if (q.value.includes("theme nord")) {
                event.preventDefault();
                body.className = "";
                body.classList.add('nord');
                localStorage.setItem('theme', 'nord');
                t.innerHTML='theme updated, nord';
            }
              
           if (q.value.includes("theme default")) {
                event.preventDefault();
                body.className = "";
                body.classList.add('default');
                localStorage.setItem('theme', 'default');
                t.innerHTML='theme updated, default';
            }
              
           if (q.value.includes("theme gruvbox")) {
                event.preventDefault();
                body.className = "";
                body.classList.add('gruvbox');
                localStorage.setItem('theme', 'gruvbox');
                t.innerHTML='theme updated, gruvbox';
            }
              
            if (q.value.includes("theme ultra")) {
              event.preventDefault();
              body.className = "";
              body.classList.add('ultra');
              localStorage.setItem('theme', 'ultra');
              t.innerHTML='theme updated, ultra';
           }
              
          }
          
           if (q.value.includes("help")) {
                event.preventDefault();
                t.innerHTML='commands:';
                help1.innerHTML='search - searches for a string';
                help2.innerHTML='open - opens a web page';
                help3.innerHTML='theme - sets a terminal theme';
            }
          
            if (q.value.includes("reset") == true) {
                body.className = "";
                body.classList.add('default');
                localStorage.setItem('theme', 'default');
                
                t.innerHTML=' ';
                help1.innerHTML=' ';
                help2.innerHTML=' ';
                help3.innerHTML='terminal reset...';
                window.close('https://thecommieaxolotl.github.io/StartPage/src/index.html');
             
            }
      }
      f.addEventListener('submit', submitted);
    </script>
</body>

</html>
